{"ast":null,"code":"import { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { Subscription } from 'rxjs';\nimport { OrderIsDone } from 'src/app/enums/order-is-done.enum';\nimport { OrderIsFailed } from 'src/app/enums/order-is-failed.enum';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/shared/services/catalog.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common/http\";\nimport * as i4 from \"src/app/shared/services/show-modal.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"../../../shared/modal/modal.component\";\n\nfunction OrderComponent_span_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 25);\n    i0.ɵɵtext(1, \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043A\\u043E\\u0440\\u0440\\u0435\\u043A\\u0442\\u043D\\u043E\\u0435 \\u0438\\u043C\\u044F\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrderComponent_span_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 25);\n    i0.ɵɵtext(1, \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043A\\u043E\\u0440\\u0440\\u0435\\u043A\\u0442\\u043D\\u0443\\u044E \\u0444\\u0430\\u043C\\u0438\\u043B\\u0438\\u044E\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrderComponent_span_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 25);\n    i0.ɵɵtext(1, \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043A\\u043E\\u0440\\u0440\\u0435\\u043A\\u0442\\u043D\\u044B\\u0439 \\u043D\\u043E\\u043C\\u0435\\u0440\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrderComponent_span_36_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 25);\n    i0.ɵɵtext(1, \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043A\\u043E\\u0440\\u0440\\u0435\\u043A\\u0442\\u043D\\u044B\\u0439 \\u0430\\u0434\\u0440\\u0435\\u0441\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrderComponent_span_41_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 25);\n    i0.ɵɵtext(1, \"\\u0418\\u043D\\u0434\\u0435\\u043A\\u0441 \\u043C\\u043E\\u0436\\u0435\\u0442 \\u0441\\u043E\\u0434\\u0435\\u0440\\u0436\\u0430\\u0442\\u044C \\u0442\\u043E\\u043B\\u044C\\u043A\\u043E \\u0446\\u0438\\u0444\\u0440\\u044B\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrderComponent_span_47_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 25);\n    i0.ɵɵtext(1, \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043A\\u043E\\u0440\\u0440\\u0435\\u043A\\u0442\\u043D\\u044B\\u0439 email\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrderComponent_app_modal_50_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-modal\", 26);\n    i0.ɵɵlistener(\"closeEvent\", function OrderComponent_app_modal_50_Template_app_modal_closeEvent_0_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.handeCloseEvent());\n    });\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport let OrderComponent = /*#__PURE__*/(() => {\n  class OrderComponent {\n    constructor(catalogService, route, router, http, showModalService) {\n      this.catalogService = catalogService;\n      this.route = route;\n      this.router = router;\n      this.http = http;\n      this.showModalService = showModalService;\n      this.subscription = new Subscription();\n      this.subscriptionModal = new Subscription();\n      this.formValidation = new FormGroup({});\n      this.productId = 0;\n      this.showModal = false;\n      this.product = {\n        id: 0,\n        image: ' ',\n        title: ' ',\n        price: ' ',\n        description: ' '\n      };\n    }\n\n    ngOnInit() {\n      this.productId = +this.route.snapshot.params['id'];\n      this.subscription = this.catalogService.getCatalogData().subscribe(data => {\n        let prd = data.find(item => item.id === this.productId);\n\n        if (prd) {\n          this.product = prd;\n        } else {\n          this.router.navigate(['/tea-service/not-found']);\n        }\n      });\n      this.formValidation = new FormGroup({\n        'description': new FormControl(null),\n        'customerName': new FormControl(null, [Validators.required, Validators.pattern(/[A-Za-zА-Яа-я]/gm)]),\n        'customerLastName': new FormControl(null, [Validators.required, Validators.pattern(/[A-Za-zА-Яа-я]/gm)]),\n        'phone': new FormControl(null, [Validators.required, Validators.pattern(/^(\\+\\d{0,1})?\\d{11}$/)]),\n        'ardess': new FormControl(null, [Validators.required, Validators.pattern(/[A-Za-z0-9А-Яа-я\\s\\/^|\\\\=+]*$/)]),\n        'postCode': new FormControl(null, [Validators.required, Validators.pattern(/[0-9]/)]),\n        'email': new FormControl(null, [Validators.required, Validators.email])\n      });\n    }\n\n    ngOnDestroy() {\n      this.subscription.unsubscribe();\n      this.subscriptionModal.unsubscribe();\n    }\n\n    onSubmit() {\n      let body = {\n        name: this.formValidation.value.customerName,\n        last_name: this.formValidation.value.customerLastName,\n        phone: this.formValidation.value.phone,\n        country: this.formValidation.value.ardess,\n        zip: this.formValidation.value.postCode,\n        product: this.product.title,\n        address: this.formValidation.value.ardess,\n        comment: this.formValidation.value.description\n      };\n      let response$ = this.http.post('https://testologia.site/order-tea', body);\n      response$.subscribe({\n        next: () => {\n          this.subscriptionModal = this.showModalService.showModal(OrderIsDone.route, OrderIsDone.description, OrderIsDone.buttonName, OrderIsDone.timeout).subscribe(data => {\n            this.showModal = data;\n          });\n        },\n        error: () => {\n          this.subscriptionModal = this.showModalService.showModal(OrderIsFailed.route, OrderIsFailed.description, OrderIsFailed.buttonName, OrderIsFailed.timeout).subscribe(data => {\n            this.showModal = data;\n          });\n        }\n      });\n    }\n\n    handeCloseEvent() {\n      this.showModal = false;\n    }\n\n  }\n\n  OrderComponent.ɵfac = function OrderComponent_Factory(t) {\n    return new (t || OrderComponent)(i0.ɵɵdirectiveInject(i1.CatalogService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.HttpClient), i0.ɵɵdirectiveInject(i4.ShowModalService));\n  };\n\n  OrderComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: OrderComponent,\n    selectors: [[\"app-order\"]],\n    decls: 51,\n    vars: 10,\n    consts: [[1, \"form\", \"mb-5\"], [1, \"container\", \"wow\", \"animate__zoomIn\"], [1, \"order-title\", \"h2\", \"text-center\", \"mt-5\", \"mb-4\"], [1, \"order-form\", \"mx-auto\", 3, \"formGroup\", \"ngSubmit\"], [1, \"row\"], [1, \"mb-3\", \"col\"], [\"for\", \"exampleInputProductName\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"exampleInputProductName\", \"aria-describedby\", \"emailHelp\", \"disabled\", \"\", 1, \"form-control\", 3, \"value\"], [\"for\", \"exampleInputProductComment\", 1, \"form-label\"], [\"formControlName\", \"description\", \"type\", \"text\", \"id\", \"exampleInputProductComment\", \"aria-describedby\", \"emailHelp\", 1, \"form-control\"], [\"for\", \"exampleInputName\", 1, \"form-label\"], [\"formControlName\", \"customerName\", \"type\", \"text\", \"id\", \"exampleInputName\", \"aria-describedby\", \"emailHelp\", 1, \"form-control\", \"form-name\"], [\"class\", \"not-valid-block\", 4, \"ngIf\"], [\"for\", \"exampleInputLastName\", 1, \"form-label\"], [\"formControlName\", \"customerLastName\", \"type\", \"text\", \"id\", \"exampleInputLastName\", \"aria-describedby\", \"emailHelp\", 1, \"surname\", \"form-control\"], [\"for\", \"exampleInputPhone\", 1, \"form-label\"], [\"formControlName\", \"phone\", \"type\", \"tel\", \"id\", \"exampleInputPhone\", \"aria-describedby\", \"emailHelp\", 1, \"phone-number\", \"form-control\"], [\"for\", \"exampleInputAdress\", 1, \"form-label\"], [\"formControlName\", \"ardess\", \"type\", \"text\", \"id\", \"exampleInputAdress\", \"aria-describedby\", \"emailHelp\", 1, \"state\", \"form-control\"], [\"for\", \"exampleInputCPostCode\", 1, \"form-label\"], [\"formControlName\", \"postCode\", \"type\", \"text\", \"id\", \"exampleInputEmail1\", \"aria-describedby\", \"emailHelp\", 1, \"form-control\", \"postcode\"], [\"for\", \"exampleInputEmail1\", 1, \"form-label\"], [\"formControlName\", \"email\", \"type\", \"email\", \"id\", \"exampleInputEmail1\", \"aria-describedby\", \"emailHelp\", 1, \"email\", \"form-control\"], [\"type\", \"submit\", 1, \"submitBtn\", \"btn\", \"btn-primary\", \"ps-5\", \"pe-5\", 3, \"disabled\"], [3, \"closeEvent\", 4, \"ngIf\"], [1, \"not-valid-block\"], [3, \"closeEvent\"]],\n    template: function OrderComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"section\", 0)(1, \"div\", 1)(2, \"h2\", 2);\n        i0.ɵɵtext(3, \"\\u0421\\u0434\\u0435\\u043B\\u0430\\u0442\\u044C \\u0437\\u0430\\u043A\\u0430\\u0437\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"form\", 3);\n        i0.ɵɵlistener(\"ngSubmit\", function OrderComponent_Template_form_ngSubmit_4_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵelementStart(5, \"div\", 4)(6, \"div\", 5)(7, \"label\", 6);\n        i0.ɵɵtext(8, \"\\u0422\\u043E\\u0432\\u0430\\u0440\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(9, \"input\", 7);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(10, \"div\", 4)(11, \"div\", 5)(12, \"label\", 8);\n        i0.ɵɵtext(13, \"\\u041A\\u043E\\u043C\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0439 \\u043A \\u0437\\u0430\\u043A\\u0430\\u0437\\u0443\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(14, \"input\", 9);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(15, \"div\", 4)(16, \"div\", 5)(17, \"label\", 10);\n        i0.ɵɵtext(18, \"\\u0418\\u043C\\u044F\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(19, \"input\", 11);\n        i0.ɵɵtemplate(20, OrderComponent_span_20_Template, 2, 0, \"span\", 12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"div\", 5)(22, \"label\", 13);\n        i0.ɵɵtext(23, \"\\u0424\\u0430\\u043C\\u0438\\u043B\\u0438\\u044F\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(24, \"input\", 14);\n        i0.ɵɵtemplate(25, OrderComponent_span_25_Template, 2, 0, \"span\", 12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"div\", 5)(27, \"label\", 15);\n        i0.ɵɵtext(28, \"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(29, \"input\", 16);\n        i0.ɵɵtemplate(30, OrderComponent_span_30_Template, 2, 0, \"span\", 12);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(31, \"div\", 4)(32, \"div\", 5)(33, \"label\", 17);\n        i0.ɵɵtext(34, \"\\u0410\\u0434\\u0440\\u0435\\u0441\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(35, \"input\", 18);\n        i0.ɵɵtemplate(36, OrderComponent_span_36_Template, 2, 0, \"span\", 12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(37, \"div\", 5)(38, \"label\", 19);\n        i0.ɵɵtext(39, \"\\u0418\\u043D\\u0434\\u0435\\u043A\\u0441\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(40, \"input\", 20);\n        i0.ɵɵtemplate(41, OrderComponent_span_41_Template, 2, 0, \"span\", 12);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(42, \"div\", 4)(43, \"div\", 5)(44, \"label\", 21);\n        i0.ɵɵtext(45, \"Email\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(46, \"input\", 22);\n        i0.ɵɵtemplate(47, OrderComponent_span_47_Template, 2, 0, \"span\", 12);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(48, \"button\", 23);\n        i0.ɵɵtext(49, \"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵtemplate(50, OrderComponent_app_modal_50_Template, 1, 0, \"app-modal\", 24);\n      }\n\n      if (rf & 2) {\n        let tmp_2_0;\n        let tmp_3_0;\n        let tmp_4_0;\n        let tmp_5_0;\n        let tmp_6_0;\n        let tmp_7_0;\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"formGroup\", ctx.formValidation);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"value\", ctx.product.title);\n        i0.ɵɵadvance(11);\n        i0.ɵɵproperty(\"ngIf\", !((tmp_2_0 = ctx.formValidation.get(\"customerName\")) == null ? null : tmp_2_0.valid) && ((tmp_2_0 = ctx.formValidation.get(\"customerName\")) == null ? null : tmp_2_0.touched));\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", !((tmp_3_0 = ctx.formValidation.get(\"customerLastName\")) == null ? null : tmp_3_0.valid) && ((tmp_3_0 = ctx.formValidation.get(\"customerLastName\")) == null ? null : tmp_3_0.touched));\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", !((tmp_4_0 = ctx.formValidation.get(\"phone\")) == null ? null : tmp_4_0.valid) && ((tmp_4_0 = ctx.formValidation.get(\"phone\")) == null ? null : tmp_4_0.touched));\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngIf\", !((tmp_5_0 = ctx.formValidation.get(\"ardess\")) == null ? null : tmp_5_0.valid) && ((tmp_5_0 = ctx.formValidation.get(\"ardess\")) == null ? null : tmp_5_0.touched));\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", !((tmp_6_0 = ctx.formValidation.get(\"postCode\")) == null ? null : tmp_6_0.valid) && ((tmp_6_0 = ctx.formValidation.get(\"postCode\")) == null ? null : tmp_6_0.touched));\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngIf\", !((tmp_7_0 = ctx.formValidation.get(\"email\")) == null ? null : tmp_7_0.valid) && ((tmp_7_0 = ctx.formValidation.get(\"email\")) == null ? null : tmp_7_0.touched));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"disabled\", !ctx.formValidation.valid);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.showModal);\n      }\n    },\n    dependencies: [i5.NgIf, i6.ɵNgNoValidate, i6.DefaultValueAccessor, i6.NgControlStatus, i6.NgControlStatusGroup, i6.FormGroupDirective, i6.FormControlName, i7.ModalComponent],\n    styles: [\".not-valid-block[_ngcontent-%COMP%]{color:red}\"]\n  });\n  return OrderComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}